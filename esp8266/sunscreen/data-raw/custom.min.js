function GetURLParameter(e){for(var t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++){var c=n[o].split("=");if(c[0]==e)return c[1]}}function updateResult(e){$("#pos-luifel").html(e.position_luifel),$("#pos-screen").html(e.position_screen)}function openClose(e){let t="./Operate?targetPercentageOpen="+e+"&key="+key+"&timestamp="+Date.now();$.get(t,updateResult)}function openCloseScreen(e){let t="./Operate_screen?targetPercentageOpen="+e+"&key="+key+"&timestamp="+Date.now();$.get(t,updateResult)}function updateMode(e){$("#span-mode").text(e.automatic_mode),$("#span-mode-screen").text(e.automatic_mode_screen)}function updateChecks(){$.get("./get_currentStatusSolarManager?key="+key,e=>{var t=unpackToBooleanArray(parseInt(e.currentStatusSolarManager,10),5);setSpanCheckmark("check-owm_OK",t[0]),setSpanCheckmark("check-sm_OK",t[1]),setSpanCheckmark("check-tm_OK",t[2]),setSpanCheckmark("check-wind_OK",t[3]),setSpanCheckmark("check-solarEdge_OK",t[4])})}function setSpanCheckmark(e,t){var n=t?"✔️":"❌";$("#"+e).text(n)}function unpackToBooleanArray(e,t){var n=[];for(let c=t-1;c>=0;c--){var o=1==(e>>c&1);n.push(o)}return n}let key=GetURLParameter("key");$("#button-open").click(function(){openClose(100)}),$("#button-close").click(function(){openClose(0)}),$("#button-open-screen").click(function(){openCloseScreen(100)}),$("#button-close-screen").click(function(){openCloseScreen(0)}),$("#button-set-to").click(function(){openClose($("#target-percentage-select").val())}),$("#button-current").click(function(){$.get("./CurrentPosition?key="+key,updateResult)}),$("#button-mode").click(function(){$.post("./Automatic?key="+key,updateMode)}),$("#button-mode-screen").click(function(){$.post("./Automatic_screen?key="+key,updateMode)}),$(function(){for(let e=100;e>=0;e-=10)$("#target-percentage-select").append(`<option value="${e}"> ${e} </option>`);$.get("./Automatic?key="+key,updateMode),$.get("./CurrentPosition?key="+key,updateResult),updateChecks(),setInterval(updateChecks,1e4);var e=document.querySelector("#the-sun");e.innerHTML='<img src="sun.png" class="img-fluid" alt="Sun">'});